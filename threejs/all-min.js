THREE.OrbitControls=function(e,t){var n,a,o,r,i;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),p=u.NONE},this.update=(n=new THREE.Vector3,a=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),o=a.clone().inverse(),r=new THREE.Vector3,i=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(a),d.setFromVector3(n),s.autoRotate&&p===u.NONE&&M(2*Math.PI/60/60*s.autoRotateSpeed),d.theta+=E.theta,d.phi+=E.phi,d.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,d.theta)),d.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=b,d.radius=Math.max(s.minDistance,Math.min(s.maxDistance,d.radius)),s.target.add(f),n.setFromSpherical(d),n.applyQuaternion(o),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(E.theta*=1-s.dampingFactor,E.phi*=1-s.dampingFactor,f.multiplyScalar(1-s.dampingFactor)):(E.set(0,0,0),f.set(0,0,0)),b=1,!!(g||r.distanceToSquared(s.object.position)>m||8*(1-i.dot(s.object.quaternion))>m)&&(s.dispatchEvent(c),r.copy(s.object.position),i.copy(s.object.quaternion),g=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",_,!1),s.domElement.removeEventListener("mousedown",N,!1),s.domElement.removeEventListener("wheel",z,!1),s.domElement.removeEventListener("touchstart",B,!1),s.domElement.removeEventListener("touchend",Y,!1),s.domElement.removeEventListener("touchmove",Z,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",D,!1)};var s=this,c={type:"change"},l={type:"start"},h={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},p=u.NONE,m=1e-6,d=new THREE.Spherical,E=new THREE.Spherical,b=1,f=new THREE.Vector3,g=!1,v=new THREE.Vector2,T=new THREE.Vector2,R=new THREE.Vector2,w=new THREE.Vector2,y=new THREE.Vector2,H=new THREE.Vector2,L=new THREE.Vector2,O=new THREE.Vector2,x=new THREE.Vector2;function j(){return Math.pow(.95,s.zoomSpeed)}function M(e){E.theta-=e}function P(e){E.phi-=e}var C,A=(C=new THREE.Vector3,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),f.add(C)}),k=function(){var e=new THREE.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),F=function(){var e=new THREE.Vector3;return function(t,n){var a=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var o=s.object.position;e.copy(o).sub(s.target);var r=e.length();r*=Math.tan(s.object.fov/2*Math.PI/180),A(2*t*r/a.clientHeight,s.object.matrix),k(2*n*r/a.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(A(t*(s.object.right-s.object.left)/s.object.zoom/a.clientWidth,s.object.matrix),k(n*(s.object.top-s.object.bottom)/s.object.zoom/a.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function V(e){s.object.isPerspectiveCamera?b/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function S(e){s.object.isPerspectiveCamera?b*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function N(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.ORBIT:if(!1===s.enableRotate)return;!function(e){v.set(e.clientX,e.clientY)}(e),p=u.ROTATE;break;case s.mouseButtons.ZOOM:if(!1===s.enableZoom)return;!function(e){L.set(e.clientX,e.clientY)}(e),p=u.DOLLY;break;case s.mouseButtons.PAN:if(!1===s.enablePan)return;!function(e){w.set(e.clientX,e.clientY)}(e),p=u.PAN}p!==u.NONE&&(document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",U,!1),s.dispatchEvent(l))}}function I(e){if(!1!==s.enabled)switch(e.preventDefault(),p){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),R.subVectors(T,v).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*R.x/t.clientHeight),P(2*Math.PI*R.y/t.clientHeight),v.copy(T),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),x.subVectors(O,L),x.y>0?V(j()):x.y<0&&S(j()),L.copy(O),s.update()}(e);break;case u.PAN:if(!1===s.enablePan)return;!function(e){y.set(e.clientX,e.clientY),H.subVectors(y,w).multiplyScalar(s.panSpeed),F(H.x,H.y),w.copy(y),s.update()}(e)}}function U(e){!1!==s.enabled&&(document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",U,!1),s.dispatchEvent(h),p=u.NONE)}function z(e){!1===s.enabled||!1===s.enableZoom||p!==u.NONE&&p!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),function(e){e.deltaY<0?S(j()):e.deltaY>0&&V(j()),s.update()}(e),s.dispatchEvent(h))}function D(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:F(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:F(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:F(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:F(-s.keyPanSpeed,0),s.update()}}(e)}function B(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=u.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);L.set(0,a)}if(s.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(o,r)}}(e),p=u.TOUCH_DOLLY_PAN;break;default:p=u.NONE}p!==u.NONE&&s.dispatchEvent(l)}}function Z(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(p!==u.TOUCH_ROTATE)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY),R.subVectors(T,v).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*R.x/t.clientHeight),P(2*Math.PI*R.y/t.clientHeight),v.copy(T),s.update()}(e);break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;if(p!==u.TOUCH_DOLLY_PAN)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);O.set(0,a),x.set(0,Math.pow(O.y/L.y,s.zoomSpeed)),V(x.y),L.copy(O)}if(s.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(o,r),H.subVectors(y,w).multiplyScalar(s.panSpeed),F(H.x,H.y),w.copy(y)}s.update()}(e);break;default:p=u.NONE}}function Y(e){!1!==s.enabled&&(s.dispatchEvent(h),p=u.NONE)}function _(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",_,!1),s.domElement.addEventListener("mousedown",N,!1),s.domElement.addEventListener("wheel",z,!1),s.domElement.addEventListener("touchstart",B,!1),s.domElement.addEventListener("touchend",Y,!1),s.domElement.addEventListener("touchmove",Z,!1),window.addEventListener("keydown",D,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var scene=new THREE.Scene;scene.background=(new THREE.CubeTextureLoader).setPath("imgs/").load(["0004.png","0002.png","0006.png","0005.png","0001.png","0003.png"]);var light=new THREE.PointLight(16777215);light.position.set(300,400,300),scene.add(light);var axesHelper=new THREE.AxesHelper(100),material=new THREE.MeshLambertMaterial({color:16777215,map:new THREE.ImageUtils.loadTexture("./imgs/abc.jpg")}),mesh=new THREE.Mesh(new THREE.BoxGeometry(80,80,80),material);mesh.position.y-=20,scene.add(mesh);var camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3);camera.position.set(20,300,350),camera.lookAt(new THREE.Vector3(0,0,0)),scene.add(camera);let wrapper=new THREE.Object3D;wrapper.position.set(0,0,0),wrapper.add(camera),scene.add(wrapper),scene.add(new THREE.AmbientLight(16777215,.4));var renderer=new THREE.WebGLRenderer;renderer.setClearColor(16777215,1),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);var controls=new THREE.OrbitControls(camera);controls.addEventListener("change",renderer);var mtlLoader=new THREE.MTLLoader;function render(){renderer.render(scene,camera),wrapper.rotation.y+=.002,requestAnimationFrame(render)}mtlLoader.setPath("Chopper/"),mtlLoader.load("chopper.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setPath("Chopper/"),t.setMaterials(e),t.load("chopper.obj",function(e){e.scale.set(1.2,1.2,1.2),e.position.y=20,e.position.x=0,scene.add(e)})}),render(),THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /;function a(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var a={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var a=n.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var a=this.vertices,o=this.object.geometry.vertices;o.push(a[e+0],a[e+1],a[e+2]),o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var a=this.normals,o=this.object.geometry.normals;o.push(a[e+0],a[e+1],a[e+2]),o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2])},addColor:function(e,t,n){var a=this.colors,o=this.object.geometry.colors;o.push(a[e+0],a[e+1],a[e+2]),o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2])},addUV:function(e,t,n){var a=this.uvs,o=this.object.geometry.uvs;o.push(a[e+0],a[e+1]),o.push(a[t+0],a[t+1]),o.push(a[n+0],a[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,a,o,r,i,s,c){var l=this.vertices.length,h=this.parseVertexIndex(e,l),u=this.parseVertexIndex(t,l),p=this.parseVertexIndex(n,l);if(this.addVertex(h,u,p),void 0!==a&&""!==a){var m=this.uvs.length;h=this.parseUVIndex(a,m),u=this.parseUVIndex(o,m),p=this.parseUVIndex(r,m),this.addUV(h,u,p)}if(void 0!==i&&""!==i){var d=this.normals.length;h=this.parseNormalIndex(i,d),u=i===s?h:this.parseNormalIndex(s,d),p=i===c?h:this.parseNormalIndex(c,d),this.addNormal(h,u,p)}this.colors.length>0&&this.addColor(h,u,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,a=e.length;n<a;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,a=this.uvs.length,o=0,r=e.length;o<r;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));var i=0;for(r=t.length;i<r;i++)this.addUVLine(this.parseUVIndex(t[i],a))}};return e.startObject("",!1),e}function o(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return o.prototype={constructor:o,load:function(e,t,n,a){var o=this,r=new THREE.FileLoader(o.manager);r.setPath(this.path),r.load(e,function(e){t(o.parse(e))},n,a)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(o){console.time("OBJLoader");var r=new a;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var i=o.split("\n"),s="",c="",l=[],h="function"==typeof"".trimLeft,u=0,p=i.length;u<p;u++)if(s=i[u],0!==(s=h?s.trimLeft():s.trim()).length&&"#"!==(c=s.charAt(0)))if("v"===c){var m=s.split(/\s+/);switch(m[0]){case"v":r.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),8===m.length&&r.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]));break;case"vn":r.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":r.uvs.push(parseFloat(m[1]),parseFloat(m[2]))}}else if("f"===c){for(var d=s.substr(1).trim().split(/\s+/),E=[],b=0,f=d.length;b<f;b++){var g=d[b];if(g.length>0){var v=g.split("/");E.push(v)}}var T=E[0];for(b=1,f=E.length-1;b<f;b++){var R=E[b],w=E[b+1];r.addFace(T[0],R[0],w[0],T[1],R[1],w[1],T[2],R[2],w[2])}}else if("l"===c){var y=s.substring(1).trim().split(" "),H=[],L=[];if(-1===s.indexOf("/"))H=y;else for(var O=0,x=y.length;O<x;O++){var j=y[O].split("/");""!==j[0]&&H.push(j[0]),""!==j[1]&&L.push(j[1])}r.addLineGeometry(H,L)}else if("p"===c){var M=s.substr(1).trim().split(" ");r.addPointGeometry(M)}else if(null!==(l=e.exec(s))){var P=(" "+l[0].substr(1).trim()).substr(1);r.startObject(P)}else if(n.test(s))r.object.startMaterial(s.substring(7).trim(),r.materialLibraries);else if(t.test(s))r.materialLibraries.push(s.substring(7).trim());else{if("s"!==c){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if((l=s.split(" ")).length>1){var C=l[1].trim().toLowerCase();r.object.smooth="0"!==C&&"off"!==C}else r.object.smooth=!0;(_=r.object.currentMaterial())&&(_.smooth=r.object.smooth)}r.finalize();var A=new THREE.Group;A.materialLibraries=[].concat(r.materialLibraries);for(u=0,p=r.objects.length;u<p;u++){var k=r.objects[u],F=k.geometry,V=k.materials,S="Line"===F.type,N="Points"===F.type,I=!1;if(0!==F.vertices.length){var U=new THREE.BufferGeometry;U.addAttribute("position",new THREE.Float32BufferAttribute(F.vertices,3)),F.normals.length>0?U.addAttribute("normal",new THREE.Float32BufferAttribute(F.normals,3)):U.computeVertexNormals(),F.colors.length>0&&(I=!0,U.addAttribute("color",new THREE.Float32BufferAttribute(F.colors,3))),F.uvs.length>0&&U.addAttribute("uv",new THREE.Float32BufferAttribute(F.uvs,2));for(var z,D=[],B=0,Z=V.length;B<Z;B++){var Y=V[B],_=void 0;if(null!==this.materials)if(_=this.materials.create(Y.name),!S||!_||_ instanceof THREE.LineBasicMaterial){if(N&&_&&!(_ instanceof THREE.PointsMaterial)){var G=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});X.copy(_),_=G}}else{var X=new THREE.LineBasicMaterial;X.copy(_),X.lights=!1,_=X}_||((_=S?new THREE.LineBasicMaterial:N?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=Y.name),_.flatShading=!Y.smooth,_.vertexColors=I?THREE.VertexColors:THREE.NoColors,D.push(_)}if(D.length>1){for(B=0,Z=V.length;B<Z;B++){Y=V[B];U.addGroup(Y.groupStart,Y.groupCount,B)}z=S?new THREE.LineSegments(U,D):N?new THREE.Points(U,D):new THREE.Mesh(U,D)}else z=S?new THREE.LineSegments(U,D[0]):N?new THREE.Points(U,D[0]):new THREE.Mesh(U,D[0]);z.name=k.name,A.add(z)}}return console.timeEnd("OBJLoader"),A}},o}(),THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,n,a){var o=this,r=new THREE.FileLoader(this.manager);r.setPath(this.path),r.load(e,function(e){t(o.parse(e))},n,a)},setPath:function(e){return this.path=e,this},setTexturePath:function(e){return this.texturePath=e,this},setBaseUrl:function(e){return console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e){for(var t=e.split("\n"),n={},a=/\s+/,o={},r=0;r<t.length;r++){var i=t[r];if(0!==(i=i.trim()).length&&"#"!==i.charAt(0)){var s=i.indexOf(" "),c=s>=0?i.substring(0,s):i;c=c.toLowerCase();var l=s>=0?i.substring(s+1):"";if(l=l.trim(),"newmtl"===c)n={name:l},o[l]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var h=l.split(a,3);n[c]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else n[c]=l}}var u=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return u.setCrossOrigin(this.crossOrigin),u.setManager(this.manager),u.setMaterials(o),u}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var a=e[n],o={};for(var r in t[n]=o,a){var i=!0,s=a[r],c=r.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(i=!1)}i&&(o[c]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],a={name:e,side:this.side};function o(e,n){if(!a[e]){var o,r,i=t.getTextureParams(n,a),s=t.loadTexture((o=t.baseUrl,"string"!=typeof(r=i.url)||""===r?"":/^https?:\/\//i.test(r)?r:o+r));s.repeat.copy(i.scale),s.offset.copy(i.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,a[e]=s}}for(var r in n){var i,s=n[r];if(""!==s)switch(r.toLowerCase()){case"kd":a.color=(new THREE.Color).fromArray(s);break;case"ks":a.specular=(new THREE.Color).fromArray(s);break;case"map_kd":o("map",s);break;case"map_ks":o("specularMap",s);break;case"norm":o("normalMap",s);break;case"map_bump":case"bump":o("bumpMap",s);break;case"ns":a.shininess=parseFloat(s);break;case"d":(i=parseFloat(s))<1&&(a.opacity=i,a.transparent=!0);break;case"tr":i=parseFloat(s),this.options&&this.options.invertTrProperty&&(i=1-i),i>0&&(a.opacity=1-i,a.transparent=!0)}}return this.materials[e]=new THREE.MeshPhongMaterial(a),this.materials[e]},getTextureParams:function(e,t){var n,a={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},o=e.split(/\s+/);return(n=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[n+1]),o.splice(n,2)),(n=o.indexOf("-s"))>=0&&(a.scale.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),(n=o.indexOf("-o"))>=0&&(a.offset.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),a.url=o.join(" ").trim(),a},loadTexture:function(e,t,n,a,o){var r,i=THREE.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===i&&(i=new THREE.TextureLoader(s)),i.setCrossOrigin&&i.setCrossOrigin(this.crossOrigin),r=i.load(e,n,a,o),void 0!==t&&(r.mapping=t),r}};